(function(k,g){if(!g.querySelectorAll)return!1;var A=RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi"),B=RegExp("((@font-face\\s*?){([\\s\\S]*?)})","gi"),C=RegExp("(\\/\\*[\\s\\S]*?\\*\\/)","gi"),D=RegExp("@import .*?;","gi"),E=RegExp("@charset .*?;","gi"),v=/[\d\.]+%/,y=/\d+pt/,F=/(\d+)px/g,G=/[\d\.]+r?em/,H=/[\d\.]+rem/,I=/[\d\.]+em/,J=/[\+\-\/\*]?[\d\.]+(px|%|em|rem)?/g,K=/[\s\-0-9]/g,n=[],t=[],f=[],e={camelize:function(c){return c.replace(/\-(\w)/g,function(b,a){return a.toUpperCase()})},
trim:function(c){var b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;return String.prototype.trim?c.trim():c.replace(b,"")},indexOf:function(c,b,a){var d=c.length>>>0;a=Number(a)||0;a=0>a?Math.ceil(a):Math.floor(a);for(0>a&&(a+=d);a<d;a++)if(a in c&&c[a]===b)return a;return-1},getStyle:function(c,b){return c.currentStyle?c.currentStyle[e.camelize(b)]:g.defaultView&&g.defaultView.getComputedStyle?g.defaultView.getComputedStyle(c,null).getPropertyValue(b):c.style[e.camelize(b)]},getFontsize:function(c){var b,
a=g.createElement("span");a.innerHTML="&nbsp;";a.style.position="absolute";a.style.lineHeight="1em";a.style.fontSize="1em";c.appendChild(a);b=a.offsetHeight;c.removeChild(a);return b},addEvent:function(c,b,a){g.addEventListener?c.addEventListener(b,a,!1):c.attachEvent("on"+b,a)},textResize:function(c){var b,a,d=function(){var e=b.offsetHeight;if(a===e)return k.requestAnimationFrame(d),!1;a=e;c&&"function"===typeof c&&c();k.requestAnimationFrame(d)};b=g.createElement("span");b.id="text-resize-control";
b.innerHTML="&nbsp;";b.style.position="absolute";b.style.left="-9999px";b.style.lineHeight="1em";b.style.fontSize="1em";g.body.insertBefore(b,g.body.firstChild);a=b.offsetHeight;k.requestAnimationFrame(d)}},L=function(){var c=document.createElement("div");c.style.cssText="width: -moz-calc(10px); width: -webkit-calc(10px); width: calc(10px)";return!!c.style.length},M=function(){for(var c=[],b=0,a=g.styleSheets.length,d;b<a;b++)d=g.styleSheets[b],f[b]="",d.href&&""!==d.href&&c.push(d.href),d.ownerNode&&
"style"===d.ownerNode.nodeName.toLowerCase()&&(f[b]=d.ownerNode.textContent);if(0<c.length){var e,b=0,a=c.length;if(k.XMLHttpRequest)e=new XMLHttpRequest;else try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(q){e=null}if(e)for(;b<a;b++)try{e.open("GET",c[b],!1),e.send(),200===e.status&&(f[b]=e.responseText)}catch(p){console.log("Error making request for file "+c[b]+": "+p.message)}if(0<f.length)for(c=0,e=f.length;c<e;c++)f[c].length&&(f[c]=f[c].replace(C,"").replace(E,"").replace(D,"").replace(A,
"").replace(B,""),w(z(f[c])))}},N=function(c){for(var b=0,a=c.length;b<a;b++)c[b].removeAttribute("style")},z=function(c,b){var a,d,f,q,p,h,x,u=[];b=b||"";for(f=RegExp("((\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");;){a=f.exec(c);if(null===a)break;q=e.trim((a[2]||a[5]).split("\r\n").join("\n"));if(-1!==q.indexOf("@media"))p=a[3]+"\n}",u=u.concat(z(p,q.replace("@media","")));else for(p=a[6].split("\r\n").join("\n").split(";"),a=0,d=p.length;a<d;a++){h=RegExp("^(\\s*?[\\s\\S]*):(\\s*?[\\s\\S]*?((\\-(webkit|moz)\\-)?calc\\(([\\s\\S]+)\\))[\\s\\S]*)?$",
"gi").exec(p[a]);try{x=g.querySelectorAll(q)}catch(l){console.log('Error trying to select "'+q+'": '+l.message);break}null!==h&&x.length&&(h={elements:x,media:b,values:e.trim(h[2]),formula:h[6],prop:e.trim(h[1]),placholder:e.trim(h[3])},h.formula.match(v)&&(h.onresize=!0),h.formula.match(G)&&(h.ontextresize=!0),u.push(h))}}return u},w=function(c){for(var b=0,a=c.length,d,f=function(a){for(var b=0,c=a.elements.length,d,f,l,k,m,n,r;b<c;b++){r=a.formula.replace(F,"$1");l=r.match(J);k=l.length;for(m=
0;m<k;m++)f=null,l[m].match(v)&&(d=a.elements[b].parentNode.clientWidth,f=parseFloat(l[m],10)/100),l[m].match(I)&&(d=a.elements[b].currentStyle?e.getFontsize(a.elements[b]):parseInt(e.getStyle(a.elements[b],"font-size").replace(/px/,""),10),d.match&&d.match(y)&&(d=Math.round(1.333333333*parseInt(d.replace(/pt/,""),10))),f=parseFloat(l[m],10)),l[m].match(H)&&(d=e.getStyle(g.body,"font-size").match(v)?16*parseInt(e.getStyle(g.body,"font-size").replace(/%/,""),10)/100:e.getStyle(g.body,"font-size").match(y)?
Math.round(1.333333333*parseInt(e.getStyle(g.body,"font-size").replace(/pt/,""),10)):parseInt(e.getStyle(g.body,"font-size").replace(/px/,""),10),f=parseFloat(l[m],10)),f&&(r=r.replace(l[m],d*f));try{r.match(K)&&(n=eval(r),a.elements[b].style[e.trim(e.camelize(a.prop))]=a.values.replace(a.placholder,n+"px"))}catch(t){}}};b<a;b++)d=c[b],d.onresize&&-1===e.indexOf(t,d)&&t.push(d),d.ontextresize&&-1===e.indexOf(n,d)&&n.push(d),""!==d.media?k.matchMedia&&k.matchMedia(d.media).matches?f(d):N(d.elements):
f(d)};contentLoaded(k,function(){L()||(M(),0<n.length&&e.textResize(function(){w(n)}),0<t.length&&e.addEvent(k,"resize",function(){w(t)}))})})(window,document);
